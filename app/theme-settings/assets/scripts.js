(()=>{"use strict";class t{static closeNotification(t,e,o){let i=o?o.includes("wdst-modal"):null,n=document.querySelector("html");t.closest(".notification")&&t.closest(".notification").remove(),("prompt"===e||i)&&n.classList.remove("fixed")}static template(e,o,i){let n,c,s=document.querySelector("html");switch(document.onkeydown=e=>"Esc"===e.key||"Escape"===e.key?t.closeNotification(document.querySelector(".modal.notification")):null,o){case"info":default:c="info";break;case"prompt":c="prompt";break;case"confirm":c="confirm"}if(n=`\n\t\t\t\t<div class="modal notification ${c}">\n\t\t\t\t<div class="notification-header">\n\t\t\t\t\t<i class=" times"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="notification-content">\n\t\t\t\t<span>${e}</span>\n\t\t\t\t</div>`,"prompt"===o?(s.classList.add("fixed"),n+='<div class="notification-content-inputs"><input required type="number" min="50" value="50"><button type="button" class="wdst-button">Enter</button></div>'):"confirm"===o&&(n+='<div class="notification-content-inputs"><button class="wdst-button confirm">Yes</button><button class="wdst-button cancel">No</button></div>'),n+="</div>",document.body.insertAdjacentHTML("beforeend",n),document.querySelector(".notification-header i")){let e=document.querySelector(".notification-header i");e.addEventListener("click",(()=>{t.closeNotification(e,o,i)}))}}async confirm(e){t.template(e,"confirm");let o=document.querySelector(".notification-content-inputs"),i=o.querySelector("button.confirm"),n=o.querySelector("button.cancel"),c=new Promise((e=>{i.addEventListener("click",(function(){e(!0),t.closeNotification(o)})),n.addEventListener("click",(function(){e(!1),t.closeNotification(o)}))}));return await c}info(e,o=null){t.template(e,"info",o)}prompt(e,o){t.template(e,"prompt");let i=document.querySelector(".notification-content-inputs"),n=i.querySelector("input"),c=i.querySelector("button");n.value&&c.addEventListener("click",(function(){o(n.value),t.closeNotification(i)}))}}let e=new t;function o(t){const e=document.querySelector(t.toggler);if("checkbox"===t.type){const o=e.hasAttribute("checked"),i=document.querySelector(t.target);o&&i.classList.toggle("hidden"),e.addEventListener("click",(()=>{i.classList.toggle("hidden")}))}else if("select"===t.type){const t=document.querySelector(`#${e.value}`),o=t.closest("div.wdst-section-group");e.addEventListener("change",(()=>{o.querySelectorAll(".wdst-setting-group").forEach((t=>{t.classList.add("hidden")})),document.querySelector(`#${e.value}`).classList.remove("hidden")})),t.classList.remove("hidden")}}function i(...t){t.forEach((t=>{Array.from(document.querySelectorAll(t.button)).forEach((o=>{o.addEventListener("click",(()=>{let i=o.closest("div"),n=i.querySelector(t.target),c=i.querySelector(".wdst-image-chooser-preview");""!==n.value&&e.confirm("Are you sure?").then((function(t){!0===t&&(n.value="",c.style.backgroundImage="unset")}))}))}))}))}const n={toggler:"#wdst-welcome-screen input",target:"#welcome-screen-title",type:"checkbox"},c={toggler:"#wdst-header-logo-type select",type:"select"},s={toggler:"#wdst-use-top-bg-img input",target:"#wdst-top-bg-img",type:"checkbox"},l={button:"#wdst-author-image button.reset",target:"#wdst-author-image input"},a={button:"#wdst-author-preview-image button.reset",target:"#wdst-author-preview-image input"},r={button:"#wdst-header-logo-image button.reset",target:"#wdst-header-logo-image input"},u={select:"#wdst-author-image button.choose",target:'#wdst-author-image input[type="text"]',is_multiple:!1,title:"Select Author Image",types:["image"]},d={select:"#wdst-author-preview-image button.choose",target:'#wdst-author-preview-image input[type="text"]',is_multiple:!1,title:"Select Author Preview Image",types:["image"]},g={select:"#wdst-header-logo-image button.choose",target:'#wdst-header-logo-image input[type="text"]',is_multiple:!1,title:"Select Logo Image",types:["image"]},p={select:"#wdst-top-bg-img-lg-webp button.choose",target:'#wdst-top-bg-img-lg-webp input[type="text"]',is_multiple:!1,title:"Select Background Image for Desktop [WEBP]",types:["image/webp"]},m={button:"#wdst-top-bg-img-lg-webp button.reset",target:"#wdst-top-bg-img-lg-webp input"},b={select:"#wdst-top-bg-img-lg-jpeg button.choose",target:'#wdst-top-bg-img-lg-jpeg input[type="text"]',is_multiple:!1,title:"Select Background Image for Desktop [JPEG]",types:["image/jpeg"]},f={button:"#wdst-top-bg-img-lg-jpeg button.reset",target:"#wdst-top-bg-img-lg-jpeg input"},w={select:"#wdst-top-bg-img-xs-webp button.choose",target:'#wdst-top-bg-img-xs-webp input[type="text"]',is_multiple:!1,title:"Select Background Image for Mobile [WEBP]",types:["image/webp"]},y={button:"#wdst-top-bg-img-xs-webp button.reset",target:"#wdst-top-bg-img-xs-webp input"},h={select:"#wdst-top-bg-img-xs-jpeg button.choose",target:'#wdst-top-bg-img-xs-jpeg input[type="text"]',is_multiple:!1,title:"Select Background Image for Mobile [JPEG]",types:["image/jpeg"]},v={button:"#wdst-top-bg-img-xs-jpeg button.reset",target:"#wdst-top-bg-img-xs-jpeg input"};function S(t){Array.from(document.querySelectorAll(t.select)).forEach((e=>{e.addEventListener("click",(function(o){let i;o.preventDefault(),t.types||(t.types=["image"]),t.is_multiple||(t.is_multiple=!1),i=wp.media({title:t.title,multiple:t.is_multiple,library:{orderby:"date",query:!0,post_mime_type:t.types},button:{text:"Select"}}),i.on("close",(function(){let o=e.closest(".image-chooser"),n=i.state().get("selection"),c=o.querySelector(t.target),s=new Array,l=0;if(o)if(n.forEach((function(t){s[l]=t.attributes.url,l++})),1==t.is_multiple){let t=s.join(",");c&&(c.value=t)}else if(c){let t=o.querySelector(".wdst-image-chooser-preview");c.value=s[0],t.style.backgroundImage="url("+s[0]+")"}})),i.on("open",(function(){let o=e.closest(".image-chooser"),n=i.state().get("selection"),c=o.querySelector(t.target);if(1==t.is_multiple)c.value&&c.value.split(",").forEach((function(t){let e=wp.media.attachment(t);e.fetch(),n.add(e?[e]:[])}));else if(c.dataset.id){let t=c.dataset.id,e=wp.media.attachment(t);e.fetch(),n.add(e?[e]:[])}})),i.open()}))}))}const k=document.querySelector("#wdst-settings-page");document.addEventListener("DOMContentLoaded",(function(){k&&(document.querySelectorAll(".wdst-section > .wdst-row").forEach((t=>{t.classList.contains("pinned")||t.classList.add("hidden");let e=t.previousElementSibling,o=e.querySelectorAll(".section-toggler");function i(){e.classList.toggle("active"),t.classList.toggle("hidden")}o&&o.forEach((t=>{t.addEventListener("click",i)}))})),Array.from(document.querySelectorAll('input[type="checkbox"')).forEach((t=>{t.addEventListener("click",(()=>{t.hasAttribute("checked")?(t.removeAttribute("checked"),t.value=0,t.checked=!1):(t.setAttribute("checked","checked"),t.checked=!0,t.value=1)}))})),Array.from(document.querySelectorAll(".wdst-setting-item-accordion")).forEach((t=>{let e=t.nextElementSibling;t.addEventListener("click",(()=>{e.classList.contains("active")?(t.classList.remove("opened"),e.classList.remove("active")):(t.classList.add("opened"),e.classList.add("active"))}))})),o(n),o(c),o(s),S(u),i(l),S(d),i(a),S(g),i(r),S(p),i(m),S(b),i(f),S(w),i(y),S(h),i(v))}))})();